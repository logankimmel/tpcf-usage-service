---
applications:
- name: tpcf-usage-service
  buildpacks:
  - go_buildpack
  memory: 256M
  disk_quota: 512M
  instances: 1
  health-check-type: http
  health-check-http-endpoint: /health
  timeout: 180
  env:
    # Use variables from cf push --var flags
    CF_API_ENDPOINT: ((CF_API_ENDPOINT))
    CF_USERNAME: ((CF_USERNAME))
    CF_PASSWORD: ((CF_PASSWORD))
    CF_SKIP_SSL_VALIDATION: ((CF_SKIP_SSL_VALIDATION))
    # Force server mode for CF deployment
    TPCF_SERVER_MODE: "true"
    TPCF_VERBOSE: "true"
  command: ./bin/tpcf-usage-service